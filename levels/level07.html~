<HTML>
<HEAD>
<STYLE type="text/css">
.board{
   position: absolute;
   height: 200px;
   width: 300px;
   background-color: CCCCCC;
   border: 1px solid gray;
   top: 100px;
   left: 150px;
   z-index:4;
   display:none;
}
span {
	font-family: '!Bitstream Vera Sans';
	color: #000000;
	font-size: 11pt;
}
</STYLE>
</HEAD>
<BODY BGCOLOR="AAAAAA">
<SCRIPT LANGUAGE="JavaScript">

document.onkeypress = KeyPressMoveIt;
document.onkeydown = KeyDownMoveIt;
document.onkeyup = KeyUpMoveIt;

var blockT = new Array();
var blockL = new Array();
var boxT  = new Array();
var boxL  = new Array();
var T = new Array();
var B = new Array();
var L = new Array();
var R = new Array();

// Skater Data
var faceLeft = 0;
var skaterTop = 280;
var skaterLeft = 200;

// Block Data
var BlockNum = 31;
blockT[0] = 80; blockL[0] = 160;
blockT[1] = 80; blockL[1] = 480;
blockT[2] = 80; blockL[2] = 520;
blockT[3] = 120; blockL[3] = 0;
blockT[4] = 120; blockL[4] = 160;
blockT[5] = 120; blockL[5] = 320;
blockT[6] = 120; blockL[6] = 360;
blockT[7] = 120; blockL[7] = 400;
blockT[8] = 120; blockL[8] = 440;
blockT[9] = 120; blockL[9] = 480;
blockT[10] = 160; blockL[10] = 40;
blockT[11] = 160; blockL[11] = 280;
blockT[12] = 200; blockL[12] = 80;
blockT[13] = 200; blockL[13] = 240;
blockT[14] = 200; blockL[14] = 560;
blockT[15] = 320; blockL[15] = 0;
blockT[16] = 320; blockL[16] = 40;
blockT[17] = 320; blockL[17] = 80;
blockT[18] = 320; blockL[18] = 120;
blockT[19] = 320; blockL[19] = 160;
blockT[20] = 320; blockL[20] = 200;
blockT[21] = 320; blockL[21] = 240;
blockT[22] = 320; blockL[22] = 280;
blockT[23] = 320; blockL[23] = 320;
blockT[24] = 320; blockL[24] = 360;
blockT[25] = 360; blockL[25] = 360;
blockT[26] = 360; blockL[26] = 400;
blockT[27] = 360; blockL[27] = 440;
blockT[28] = 360; blockL[28] = 480;
blockT[29] = 360; blockL[29] = 520;
blockT[30] = 360; blockL[30] = 560;

// Box Data
var BoxNum = 12;
boxT[0] = 40; boxL[0] = 400;
boxT[1] = 40; boxL[1] = 440;
boxT[2] = 80; boxL[2] = 0;
boxT[3] = 80; boxL[3] = 360;
boxT[4] = 80; boxL[4] = 400;
boxT[5] = 80; boxL[5] = 440;
boxT[6] = 160; boxL[6] = 560;
boxT[7] = 240; boxL[7] = 120;
boxT[8] = 280; boxL[8] = 120;
boxT[9] = 280; boxL[9] = 160;
boxT[10] = 280; boxL[10] = 280;
boxT[11] = 280; boxL[11] = 320;

// Block Area Data
var barea = 12;
T[1]=80; B[1]=160; L[1]=160; R[1]=200;
T[2]=80; B[2]=120; L[2]=520; R[2]=560;
T[3]=80; B[3]=160; L[3]=480; R[3]=520;
T[4]=120; B[4]=160; L[4]=320; R[4]=520;
T[5]=120; B[5]=160; L[5]=0; R[5]=40;
T[6]=160; B[6]=200; L[6]=40; R[6]=80;
T[7]=160; B[7]=200; L[7]=280; R[7]=320;
T[8]=200; B[8]=240; L[8]=560; R[8]=600;
T[9]=200; B[9]=240; L[9]=80; R[9]=120;
T[10]=200; B[10]=240; L[10]=240; R[10]=280;
T[11]=320; B[11]=360; L[11]=0; R[11]=400;
T[0]=360; B[0]=400; L[0]=360; R[0]=600;


document.write("<IMG SRC='pics/bg07.png' STYLE='position:absolute; top:0; left:0; z-index:0'>"); 

document.write("<IMG id='standR' SRC='pics/standR.gif' STYLE='position:absolute; display:none; z-index:3'>"); 
var standR = document.getElementById('standR').style;
document.write("<IMG id='standL' SRC='pics/standL.gif' STYLE='position:absolute; display:none; z-index:3'>"); 
var standL = document.getElementById('standL').style;

document.write("<IMG id='skateR' SRC='pics/skateR.gif' STYLE='position:absolute; display:none; z-index:3'>"); 
var skateR = document.getElementById('skateR').style;
document.write("<IMG id='skateL' SRC='pics/skateL.gif' STYLE='position:absolute; display:none; z-index:3'>"); 
var skateL = document.getElementById('skateL').style;

document.write("<IMG id='readyR' SRC='pics/readyR.gif' STYLE='position:absolute; display:none; z-index:3'>"); 
var readyR = document.getElementById('readyR').style;
document.write("<IMG id='readyL' SRC='pics/readyL.gif' STYLE='position:absolute; display:none; z-index:3'>"); 
var readyL = document.getElementById('readyL').style;

document.write("<IMG id='holdR' SRC='pics/holdR.gif' STYLE='position:absolute; display:none; z-index:3'>"); 
var holdR = document.getElementById('holdR').style;
document.write("<IMG id='holdL' SRC='pics/holdL.gif' STYLE='position:absolute; display:none; z-index:3'>"); 
var holdL = document.getElementById('holdL').style;

document.write("<IMG id='pickupR' SRC='pics/pickupR.gif' STYLE='position:absolute; display:none; z-index:3'>"); 
var pickupR = document.getElementById('pickupR').style;
document.write("<IMG id='pickupL' SRC='pics/pickupL.gif' STYLE='position:absolute; display:none; z-index:3'>"); 
var pickupL = document.getElementById('pickupL').style;

document.write("<IMG id='moveR' SRC='pics/moveR.gif' STYLE='position:absolute; display:none; z-index:3'>"); 
var moveR = document.getElementById('moveR').style;
document.write("<IMG id='moveL' SRC='pics/moveL.gif' STYLE='position:absolute; display:none; z-index:3'>"); 
var moveL = document.getElementById('moveL').style;

document.write("<IMG id='hit' SRC='pics/hit.gif' STYLE='position:absolute; display:none; z-index:3'>"); 
var hit = document.getElementById('hit').style;

document.write('<DIV class="board" id="board"><CENTER><TABLE WIDTH="100%" HEIGHT="100%" BORDER="0"><TR><TD><CENTER><span>Level 07 cleared!<BR><BR>Password: grassypink<BR><BR><INPUT type="button" id="endNote" value="Ok" onClick="nextLevel();"></span></CENTER><TD><TR></TABLE><CENTER></DIV>'); 
function nextLevel()
{
    window.location = "./level08.html";
}

// Blocks
var bk = new Array();
for (i=0; i < BlockNum; i++)
{
	document.write('<IMG id="block' + i + '" SRC="pics/block.gif" STYLE="position: absolute; z-index:2">');
	bk[i] = document.getElementById('block' + i).style;
	bk[i].top = blockT[i];
	bk[i].left = blockL[i];
}
// Blocks

// Boxes
var bx = new Array();
for (i=0; i < BoxNum; i++)
{
	document.write('<IMG id="box' + i + '" SRC="pics/box.gif" STYLE="position: absolute; display:inline; z-index:2">');
	bx[i] = document.getElementById('box' + i).style;
	bx[i].top = boxT[i];
	bx[i].left = boxL[i];
}
// Boxes

// Broken Boxes
var bb = new Array();
for (i=0; i < 4; i++)
{
	document.write('<IMG id="bb' + i + '" SRC="pics/brokenbox.gif" STYLE="position: absolute; display:none; z-index:3">');
	bb[i] = document.getElementById('bb' + i).style;
}
// Broken Boxes

// variables
var skaterT;
var skaterL;

var moveHimRight = 0;
var moveHimLeft = 0;
var moveHimDown = 0;
var moveBoxDown = 0;
var boxfall = 0;
var boxfall2 = 0;
var moveDown;
var fall = 0;

var abox;
var Bblock = 0;

var noputdown = 0;
var x = 0;
var Tblock = 0;
var Lblock = 0;

var nolift1 = 0;
var nolift2 = 0;
var debugMove;
var timeCheck;

var bbT;
var bbL;
var finish;
var keyC = 0;
// variables

function KeyDownMoveIt(e)
{
	e = (e)?e:event;
	keyC = 0;
	if (e.keyCode == 70)
	keyC = 70;
	if (e.keyCode == 68)
	keyC = 68;
	if (e.keyCode == 39)
	keyC = 39;
	if (e.keyCode == 37)
	keyC = 37;
}
function KeyPressMoveIt(e)
{
	e = (e)?e:event;
	moveItNow();
}
function KeyUpMoveIt(e)
{
	e = (e)?e:event;
	if (e.keyCode == 70)
	keyC = 70;
	if (e.keyCode == 68)
	keyC = 68;
	if (e.keyCode == 39)
	keyC = 39;
	if (e.keyCode == 37)
	keyC = 37;
	moveOnUp();
}

//window.alert('To win the game, brake all of the boxes. Use "j" and "k" or the left and right arrow keys to move. Press "d" to lift and put down a box, press "f" to brake it.');

if (faceLeft == 1)
standL.display = "inline";
if (faceLeft == 0)
standR.display = "inline";
skaterT = skaterTop;
skaterL = skaterLeft;
movedude();

//////////////////// On Key Down ////////////////////
function moveItNow()
{
	if (fall == 0)
	{
		//Smash Box
		if ((keyC == 70) && (standR.display == "inline") && (skaterL+40 < 600) && (boxfall == 0))
		{
			Tblock = skaterT + 40;
			Lblock = skaterL + 40;
			
			for (i=0; i < barea; i++)
			{
				if ((skaterL+40 >= L[i]) && (skaterL+40 < R[i]) && (skaterT > T[i]))
				{
					Bblock = T[i];
				}
			}
			
			standR.display = "none";
			standL.display = "none";
			skateR.display = "none";
			skateL.display = "none";
			readyR.display = "inline";
			readyL.display = "none";
			pickupR.display = "none";
			pickupL.display = "none";
			moveR.display = "none";
			moveL.display = "none";
			holdR.display = "none";
			holdL.display = "none";
			hit.display = "none";
		}
		
		if ((keyC == 70) && (standL.display == "inline") && (boxfall == 0))
		{
			Tblock = skaterT + 40;
			Lblock = skaterL - 40;
			
			for (i=0; i < barea; i++)
			{
				if ((skaterL-40 >= L[i]) && (skaterL-40 < R[i]) && (skaterT > T[i]))
				{
					Bblock = T[i];
				}
			}
			
			standR.display = "none";
			standL.display = "none";
			skateR.display = "none";
			skateL.display = "none";
			readyR.display = "none";
			readyL.display = "inline";
			pickupR.display = "none";
			pickupL.display = "none";
			moveR.display = "none";
			moveL.display = "none";
			holdR.display = "none";
			holdL.display = "none";
			hit.display = "none";
		}
		//End of Smash Box
		
		//Get Ready to Lift
		if ((keyC == 68) && (standR.display == "inline") && (skaterL+40 < 600) && (x == 0) && (boxfall == 0))
		{
			nolift1 = 0;
			for (i=0; i < BoxNum; i++)
			if ((skaterT == parseInt(bx[i].top)+40) && (skaterL <= parseInt(bx[i].left)) && (skaterL+40 >= parseInt(bx[i].left)))
			nolift1 = 1;
			for (i=0; i < BlockNum; i++)
			if ((skaterT == parseInt(bk[i].top)+40) && (skaterL <= parseInt(bk[i].left)) && (skaterL+40 >= parseInt(bk[i].left)))
			nolift1 = 1;
				
			holdR.left = skaterL+5;
			holdR.top = skaterT;
			standR.display = "none";
			standL.display = "none";
			skateR.display = "none";
			skateL.display = "none";
			readyR.display = "none";
			readyL.display = "none";
			pickupR.display = "none";
			pickupL.display = "none";
			moveR.display = "none";
			moveL.display = "none";
			holdR.display = "inline";
			holdL.display = "none";
			hit.display = "none";
		}
		
		if ((keyC == 68) && (standL.display == "inline") && (x == 0) && (boxfall == 0))
		{
			nolift2 = 0;
			for (i=0; i < BoxNum; i++)
			if ((skaterT == parseInt(bx[i].top)+40) && (skaterL >= parseInt(bx[i].left)) && (skaterL-40 <= parseInt(bx[i].left)))
			nolift2 = 1;
			for (i=0; i < BlockNum; i++)
			if ((skaterT == parseInt(bk[i].top)+40) && (skaterL >= parseInt(bk[i].left)) && (skaterL-40 <= parseInt(bk[i].left)))
			nolift2 = 1;
				
			holdL.left = skaterL-5;
			holdL.top = skaterT;
			standR.display = "none";
			standL.display = "none";
			skateR.display = "none";
			skateL.display = "none";
			readyR.display = "none";
			readyL.display = "none";
			pickupR.display = "none";
			pickupL.display = "none";
			moveR.display = "none";
			moveL.display = "none";
			holdR.display = "none";
			holdL.display = "inline";
			hit.display = "none";
		}
		//End of Get Ready to Lift
		
		//Put Down Box
		if ((keyC == 68) && (pickupR.display == "inline") && (boxfall == 0))
		{
			noputdown = 0;
			if (skaterL+40 == 600)
			{
				noputdown = 1;
			}
			for (i=0; i < BlockNum; i++)
			{
				if ((skaterT-40 == parseInt(bk[i].top)) && (skaterL+40 == parseInt(bk[i].left)))
				{
					noputdown = 1;
					i = BlockNum;
				}
			}
			for (i=0; i < BoxNum; i++)
			{
				if ((skaterT-40 == parseInt(bx[i].top)) && (skaterL+40 == parseInt(bx[i].left)))
				{
					noputdown = 1;
					i = BoxNum;
				}
			}
			
			for (i=0; i < BoxNum; i++)
			{
				if ((parseInt(bx[i].top) == -80) && (parseInt(bx[i].left) == -80) && (noputdown == 0))
				{
					if ((skaterL+80)%40 == 10)
					{
						skaterL = skaterL - 10;
					}
					
					if ((skaterL+80)%40 == 20)
					{
						skaterL = skaterL - 20;
					}
					
					if ((skaterL+80)%40 == 30)
					{
						skaterL = skaterL - 30;
					}
					
					bx[i].display = "inline";
					bx[i].left = skaterL+40;
					bx[i].top = skaterT-40;
					standR.display = "inline";
					pickupR.display = "none";
					abox = bx[i];
					i = BoxNum;
				}
			}
			if (noputdown == 0)
			{
				movedude();
				gravity();
				boxgravity();
			}
		}
		
		
		if ((keyC == 68) && (pickupL.display == "inline") && (boxfall == 0))
		{
			noputdown = 0;
			if (skaterL == 0)
			{
				noputdown = 1;
			}
			for (i=0; i < BlockNum; i++)
			{
				if ((skaterT-40 == parseInt(bk[i].top)) && (skaterL-40 == parseInt(bk[i].left)))
				{
					noputdown = 1;
					i = BlockNum;
				}
			}
			for (i=0; i < BoxNum; i++)
			{
				if ((skaterT-40 == parseInt(bx[i].top)) && (skaterL-40 == parseInt(bx[i].left)))
				{
					noputdown = 1;
					i = BoxNum;
				}
			}
			
			for (i=0; i < BoxNum; i++)
			{
				if ((parseInt(bx[i].top) == -80) && (parseInt(bx[i].left) == -80) && (noputdown == 0))
				{
					if ((skaterL+80)%40 == 10)
					{
						skaterL = skaterL + 30;
					}
					
					if ((skaterL+80)%40 == 20)
					{
						skaterL = skaterL + 20;
					}
					
					if ((skaterL+80)%40 == 30)
					{
						skaterL = skaterL + 10;
					}
					
					bx[i].display = "inline";
					bx[i].left = skaterL-40;
					bx[i].top = skaterT-40;
					standL.display = "inline";
					pickupL.display = "none";
					abox = bx[i];
					i = BoxNum;
				}
			}
			if (noputdown == 0)
			{
				movedude();
				gravity();
				boxgravity();
			}
		}
		//End of Put Down Box
		
		//Move Right
		if ((keyC == 39) && (skaterL+40 < 600) && (boxfall == 0))
		{
			if ((pickupR.display == "inline") || (moveR.display == "inline") || (pickupL.display == "inline") || (moveL.display == "inline"))
			{
				for (i=0; i < BoxNum; i++)
				{
					if ((skaterL+40 == parseInt(bx[i].left)) && (skaterT == parseInt(bx[i].top)))
					moveHimRight = 1;
					if ((skaterL+40 == parseInt(bx[i].left)) && (skaterT-40 == parseInt(bx[i].top)))
					{
                  moveHimRight = 2;
					   i = BoxNum;
               }
				}
				if (moveHimRight != 2)
				{
					for (i=0; i < barea; i++)
					{
						i = barea - i
						if ((skaterL+40 == L[i]) && (skaterT == T[i]))
						{
							moveHimRight = 1;
						}
						i = barea - i
						if ((skaterL+40 == L[i]) && (skaterT > T[i]) && (skaterT <= B[i]))
						{
							moveHimRight = 2;
							i = barea;
						}
						if ((moveHimRight == 1) && (skaterT-40 == B[i]) && (skaterL+40 >= L[i]) && (skaterL+40 <= R[i]))
						{
							moveHimRight = 2;
							i = barea;
						}
					}
				}
				moveR.display = "inline";
				moveL.display = "none";
				pickupR.display = "none";
				pickupL.display = "none";
			}
			else
			{
				if (moveHimRight != 2)
				{
					for (i=0; i < BoxNum; i++)
					{
						if ((skaterL+40 == parseInt(bx[i].left)) && (skaterT == parseInt(bx[i].top)))
						{
							moveHimRight = 1;
						}
						if ((skaterL+40 == parseInt(bx[i].left)) && (skaterT-40 == parseInt(bx[i].top)))
						{
							moveHimRight = 2;
							i = BoxNum;
						}
					}
				}
				debugMove = 0;
				for (i=0; i < barea; i++)
				{
					if ((moveHimRight != 2) && (skaterL+40 == L[i]) && (skaterT == T[i]))
					{
						moveHimRight = 1;
						
						if (debugMove == 1)
						{
							moveHimRight = 2;
						}
					}
					if ((skaterL+40 == L[i]) && (skaterT > T[i]) && (skaterT < B[i]))
					{
						moveHimRight = 2;
						i = barea;
					}
					if ((moveHimRight == 1) && (skaterT == B[i]) && (skaterL+40 >= L[i]) && (skaterL+40 <= R[i]))
					{
						moveHimRight = 2;
						i = barea;
					}
					if ((skaterT == B[i]) && (skaterL+40 >= L[i]) && (skaterL+40 <= R[i]))
					{
						debugMove = 1;
					}
				}
				skateR.display = "inline";
				skateL.display = "none";
				standR.display = "none";
				standL.display = "none";
				readyR.display = "none";
				readyL.display = "none";
				holdR.display = "none";
				holdL.display = "none";
				hit.display = "none";
			}
			
			if (moveHimRight == 1)
			{
				skaterT  = skaterT - 40;
				skaterL = skaterL + 10;
			}
			if (moveHimRight == 0)
			{
				skaterL = skaterL + 10;
				movedude();
			}
			moveHimRight = 0;
			
			for (i=0; i < BoxNum; i++)
			{
				if ((skaterT+40 == parseInt(bx[i].top)) && (skaterL < parseInt(bx[i].left)+40) && (skaterL+40 > parseInt(bx[i].left)))
				{
					moveHimDown = 1;
					i = BoxNum;
				}
			}
			
			for (i=0; i < BlockNum; i++)
			{
				if ((skaterT+40 == parseInt(bk[i].top)) && (skaterL < parseInt(bk[i].left)+40) && (skaterL+40 > parseInt(bk[i].left)))
				{
					moveHimDown = 1;
					i = BlockNum;
				}
			}
			
			if (moveHimDown == 1)
			{
				moveHimDown = 0;
			}
			else
			{
				skaterT = skaterT + 10;
				moveHimDown = 0;
				movedude();
				gravity();
			}
		}
		//End of Move Right
		
		//Move Left
		if ((keyC == 37) && (skaterL > 0) && (boxfall == 0))
		{
			if ((pickupR.display == "inline") || (moveR.display == "inline") || (pickupL.display == "inline") || (moveL.display == "inline"))
			{
				for (i=0; i < BoxNum; i++)
				{
					if ((skaterL-40 == parseInt(bx[i].left)) && (skaterT == parseInt(bx[i].top)))
					moveHimLeft = 1;
					if ((skaterL-40 == parseInt(bx[i].left)) && (skaterT-40 == parseInt(bx[i].top)))
					{
                  moveHimLeft = 2;
					   i = BoxNum;
               }
				}
				
				if (moveHimLeft != 2)
				{
					for (i=0; i < barea; i++)
					{
						i = barea - i
						if ((skaterL == R[i]) && (skaterT == T[i]))
						{
							moveHimLeft = 1;
						}
						i = barea - i
						if ((skaterL == R[i]) && (skaterT > T[i]) && (skaterT <= B[i]))
						{
							moveHimLeft = 2;
							i = barea;
						}
						if ((moveHimLeft == 1) && (skaterT-40 == B[i]) && (skaterL >= L[i]) && (skaterL <= R[i]))
						{
							moveHimLeft = 2;
							i = barea;
						}
					}
				}
				moveR.display = "none";
				moveL.display = "inline";
				pickupR.display = "none";
				pickupL.display = "none";
			}
			else
			{
				if (moveHimLeft != 2)
				{
					for (i=0; i < BoxNum; i++)
					{
						if ((skaterL-40 == parseInt(bx[i].left)) && (skaterT == parseInt(bx[i].top)))
						{
							moveHimLeft = 1;
						}
						if ((skaterL-40 == parseInt(bx[i].left)) && (skaterT-40 == parseInt(bx[i].top)))
						{
							moveHimLeft = 2;
							i = BoxNum;
						}
					
					}
				}
				debugMove = 0;
				for (i=0; i < barea; i++)
				{
					if ((moveHimLeft !=2 ) && (skaterL == R[i]) && (skaterT == T[i]))
					{
						moveHimLeft = 1;
						
						if (debugMove == 1)
						{
							moveHimLeft = 2;
						}
					}
					if ((skaterL == R[i]) && (skaterT > T[i]) && (skaterT < B[i]))
					{
						moveHimLeft = 2;
						i = barea;
					}
					if ((moveHimLeft == 1) && (skaterT == B[i]) && (skaterL >= L[i]) && (skaterL <= R[i]))
					{
						moveHimLeft = 2;
						i = barea;
					}
					if ((skaterT == B[i]) && (skaterL >= L[i]) && (skaterL <= R[i]))
					{
						debugMove = 1;
					}
				}
				skateR.display = "none";
				skateL.display = "inline";
				standR.display = "none";
				standL.display = "none";
				readyR.display = "none";
				readyL.display = "none";
				holdR.display = "none";
				holdL.display = "none";
				hit.display = "none";
			}
			
			if (moveHimLeft == 1)
			{
				skaterT  = skaterT - 40;
				skaterL = skaterL - 10;
			}
			if (moveHimLeft == 0)
			{
				skaterL = skaterL - 10;
				movedude();
			}
			moveHimLeft = 0;
				
			
			for (i=0; i < BoxNum; i++)
			{
				if ((skaterT+40 == parseInt(bx[i].top)) && (skaterL < parseInt(bx[i].left)+40) && (skaterL+40 > parseInt(bx[i].left)))
				{
					moveHimDown = 1;
					i = BoxNum;
				}
			}
			
			for (i=0; i < BlockNum; i++)
			{
				if ((skaterT+40 == parseInt(bk[i].top)) && (skaterL < parseInt(bk[i].left)+40) && (skaterL+40 > parseInt(bk[i].left)))
				{
					moveHimDown = 1;
					i = BlockNum;
				}
			}
			
			if (moveHimDown == 1)
			{
				moveHimDown = 0;
			}
			else
			{
				skaterT = skaterT + 10;
				movedude();
				gravity();
			}
		}
		//End of Move Left
	}
}
//////////////////// End of On Key Down ////////////////////

//////////////////// On Key Up ///////////////////
function moveOnUp()
{
	//Smash Box
	if ((keyC == 70) && (readyR.display == "inline") && (bb[0].display == "none") && (boxfall == 0))
	{
		bb[0].left = skaterL+40;
		bb[0].top = skaterT;
		bb[1].left = skaterL+60;
		bb[1].top = skaterT;
		bb[2].left = skaterL+40;
		bb[2].top = skaterT+20;
		bb[3].left = skaterL+60;
		bb[3].top = skaterT+20;
		
		readyR.display = "none";
		hit.display = "inline";
		
		for (i=0; i < BoxNum; i++)
		{
			if ((skaterT == parseInt(bx[i].top)) && (skaterL == parseInt(bx[i].left)-40))
			{
				bx[i].display = "none";
				bx[i].left = -120;
				bx[i].top = -120;
				for (i=0; i < 4; i++)
				{
					bb[i].display = "inline";
				}
				y = 1;
				brokenProperties();
			}
		}
	}
	
	if ((keyC == 70) && (readyL.display == "inline") && (bb[0].display == "none") && (boxfall == 0))
	{
		bb[0].left = skaterL-40;
		bb[0].top = skaterT;
		bb[1].left = skaterL-60;
		bb[1].top = skaterT;
		bb[2].left = skaterL-40;
		bb[2].top = skaterT-20;
		bb[3].left = skaterL-60;
		bb[3].top = skaterT-20;
		
		readyL.display = "none";
		hit.display = "inline";
		
		for (i=0; i < BoxNum; i++)
		{
			if ((skaterT == parseInt(bx[i].top)) && (skaterL == parseInt(bx[i].left)+40))
			{
				bx[i].display = "none";
				bx[i].left = -120;
				bx[i].top = -120;
				for (i=0; i < 4; i++)
				{
					bb[i].display = "inline";
				}
				y = -1;
				brokenProperties();
			}
		}
	}
	//End of Smash Box
	
	//Lift Box
	if ((keyC == 68) && (holdR.display == "inline") && (boxfall == 0))
	{
		for (i=0; i < BoxNum; i++)
		{
			if ((skaterT == parseInt(bx[i].top)) && (skaterL == parseInt(bx[i].left)-40) && (nolift1 == 0))
			{
				holdR.display = "none";
				pickupR.display = "inline";
				bx[i].display = "none";
				bx[i].left = -80;
				bx[i].top = -80;
			}
		}
	}
	
	if ((keyC == 68) && (holdL.display == "inline") && (boxfall == 0))
	{
		for (i=0; i < BoxNum; i++)
		{
			if ((skaterT == parseInt(bx[i].top)) && (skaterL == parseInt(bx[i].left)+40) && (nolift2 == 0))
			{
				holdL.display = "none";
				pickupL.display = "inline";
				bx[i].display = "none";
				bx[i].left = -80;
				bx[i].top = -80;
			}
		}
	}
	//End of Lift Box
	
	//Stand Face Right
	if (keyC == 39)
	{
		movedude();
		if (moveR.display == "inline")
		{
			pickupR.display = "inline";
			moveR.display = "none";
		}
		
		if ((skateR.display == "inline") || (standR.display == "inline"))
		{
			skateR.display = "none";
			standR.display = "inline";
			readyR.display = "none";
			hit.display = "none";
			holdR.display = "none";
			pickupR.display = "none";
		}
	}
	//End of Stand Face Right

	//Stand Face Left
	if (keyC == 37)
	{
		movedude();
		if (moveL.display == "inline")
		{
			pickupL.display = "inline";
			moveL.display = "none";
		}
		
		if ((skateL.display == "inline") || (standL.display == "inline"))
		{
			skateL.display = "none";
			standL.display = "inline";
			readyL.display = "none";
			hit.display = "none";
			holdL.display = "none";
			pickupL.display = "none";
		}
	}
	//End of Stand Face Left
}
//////////////////// End of On Key Up ///////////////////



//////////////////// Gravity ///////////////////
function gravity()
{
	fall = 1;
	movedude();
	for (i=0; i < BoxNum; i++)
	{
		if ((skaterT+40 == parseInt(bx[i].top)) && (skaterL < parseInt(bx[i].left)+40) && (skaterL+40 > parseInt(bx[i].left)))
		{
			moveHimDown = 1;
		}
	}
	
	for (i=0; i < BlockNum; i++)
	{
		if ((skaterT+40 == parseInt(bk[i].top)) && (skaterL < parseInt(bk[i].left)+40) && (skaterL+40 > parseInt(bk[i].left)))
		{
			moveHimDown = 1;
		}
	}
	
	if (skateR.display == "inline")
	{
		standR.display = "inline";
		skateR.display = "none";
	}
	if (skateL.display == "inline")
	{
		standL.display = "inline";
		skateL.display = "none";
	}
	
	if (moveR.display == "inline")
	{
		pickupR.display = "inline";
		moveR.display = "none";
	}
	if (moveL.display == "inline")
	{
		pickupL.display = "inline";
		moveL.display = "none";
	}
	
	if (moveHimDown == 1)
	{
		moveHimDown = 0;
		fall = 0;
	}
	else
	{
		skaterT = skaterT + 10;
		setTimeout("gravity()",20);
	}
}
	
function boxgravity()
{
	boxfall = 1;
	for (i=0; i < BoxNum; i++)
	if (abox != bx[i])
	if ((parseInt(abox.top)+40 == parseInt(bx[i].top)) && (parseInt(abox.left) < parseInt(bx[i].left)+40) && (parseInt(abox.left)+40 > parseInt(bx[i].left)))
	moveDown = 1;
	
	for (i=0; i < BlockNum; i++)
	if ((parseInt(abox.top)+40 == parseInt(bk[i].top)) && (parseInt(abox.left) < parseInt(bk[i].left)+40) && (parseInt(abox.left)+40 > parseInt(bk[i].left)))
	moveDown = 1;
	
	if (moveDown == 1)
	{
		moveDown = 0;
		boxfall = 0;
	}
	else
	{
		abox.top = parseInt(abox.top) + 10;
		setTimeout('boxgravity()',20);
	}
}
	
function boxgravity2()
{
	for (i=0; i < BoxNum; i++)
	{
		if ((parseInt(bx[i].left) == Lblock) && (parseInt(bx[i].top) < Tblock) && (parseInt(bx[i].top) >= Bblock))//parseInt(Bblock.top)))
		bx[i].top = parseInt(bx[i].top) + 10;
	}
	if (boxfall2 == 3)
	{
		fall = 0;
		boxfall2 = 0;
		Bblock = 0;
	}
	else
	{
		boxfall2 = boxfall2 + 1;
		setTimeout('boxgravity2()',20);
	}
}
//////////////////// End of Gravity ///////////////////


//////////////////// Keep Images Together ////////////////////
function movedude()
{
	standR.top = skaterT;
	standR.left = skaterL;
	skateR.top = skaterT;
	skateR.left = skaterL;
	readyR.top = skaterT;
	readyR.left = skaterL;
	pickupR.left = skaterL;
	pickupR.top = skaterT - 30;
	moveR.left = skaterL;
	moveR.top = skaterT - 30;
	standL.top = skaterT;
	standL.left = skaterL;
	skateL.top = skaterT;
	skateL.left = skaterL;
	readyL.top = skaterT;
	readyL.left = skaterL;
	pickupL.left = skaterL;
	pickupL.top = skaterT - 30;
	moveL.left = skaterL;
	moveL.top = skaterT - 30;
	hit.left = skaterL - 10;
	hit.top = skaterT;
}
//////////////////// End of Keep Images Together ////////////////////



//////////////////// Broken Box Properties ///////////////////
function brokenProperties()
{
	x = x + 0.4;
	bbT = parseInt(bb[0].top) - (5 - x);
	if  (bbT+20 < 400) bb[0].top = bbT;
	if  (bbT+20 >= 400) bb[0].display = "none";
	
	bbL = parseInt(bb[0].left) + 5 * y;
	if  (bbL+20 < 600) bb[0].left = bbL;
	if  (bbL+20 >= 600) bb[0].display = "none";
	
	bbT = parseInt(bb[1].top) + 1;
	if  (bbT+20 < 400) bb[1].top = bbT;
	if  (bbT+20 >= 400) bb[1].display = "none";
	
	bbL = parseInt(bb[1].left) + 6 * y;
	if  (bbL+20 < 600) bb[1].left = bbL;
	if  (bbL+20 >= 600) bb[1].display = "none";
	
	bbT = parseInt(bb[2].top) - (4 - x);
	if  (bbT+20 < 400) bb[2].top = bbT;
	if  (bbT+20 >= 400) bb[2].display = "none";
	
	bbL = parseInt(bb[2].left) + 6 * y;
	if  (bbL+20 < 600) bb[2].left = bbL;
	if  (bbL+20 >= 600) bb[2].display = "none";
	
	bbT = parseInt(bb[3].top) - (6 - x);
	if  (bbT+20 < 400) bb[3].top = bbT;
	if  (bbT+20 >= 400) bb[3].display = "none";
	
	bbL = parseInt(bb[3].left) + 2 * y;
	if  (bbL+20 < 600) bb[3].left = bbL;
	if  (bbL+20 >= 600) bb[3].display = "none";
	
	timeCheck = setTimeout('brokenProperties()',20);
	if (x == 0.4)
	{
		fall = 1;
	}
	
	if (x == 2)
	{
		hit.display = "none";
		if ((readyR.display == "none") && (skateR.display == "none") && (holdR.display == "none"))
		if ((readyL.display == "none") && (skateL.display == "none") && (holdL.display == "none"))
		{
			if (y == 1)
			standR.display = "inline";
			if (y == -1)
			standL.display = "inline";
			boxgravity2();
		}
	}
	
	if (x >= 12)
	{
		for (i=0; i <= 3; i++)
		{
			bb[i].display = "none";
		}
		
		clearTimeout(timeCheck);
		x = 0;
		
		for (i=0; i < BoxNum; i++)
		{
			if (parseInt(bx[i].left) == -120)
			{
				finish = 1;
			}
			else
			{
				finish = 0;
				i = BoxNum;
			}
		}
		if (finish == 1)
		{
			document.getElementById('board').style.display = "inline";
         document.getElementById('endNote').focus();
		}
	}
}
//////////////////// End of Broken Box Properties ///////////////////

</SCRIPT>
</BODY>
</HTML>

